# 跳空缺口視覺化功能說明

## 功能概述

現在您的 K 線圖已經具備了跳空缺口的檢測和視覺化功能：

### 🎛️ 控制介面

在 K 線圖的標題區域，您會看到：

- **缺口統計資訊**：顯示總缺口數、向上跳空數、向下跳空數、未回補數
- **顯示開關**：一個切換開關可以控制是否在圖表上顯示缺口線條

### 📊 視覺化效果

當開啟缺口顯示時，圖表上會顯示：

#### 🟢 向上跳空缺口

- **顏色**：綠色 (#4CAF50)
- **樣式**：實線（未回補）或虛線（已回補）
- **顯示**：兩條水平線標示缺口的上下邊界

#### 🔴 向下跳空缺口

- **顏色**：紅色 (#F44336)
- **樣式**：實線（未回補）或虛線（已回補）
- **顯示**：兩條水平線標示缺口的上下邊界

### 🔧 技術實現

1. **資料處理**：

   - 使用 `useGapDetection` Hook 檢測所有跳空缺口
   - 使用 `useGapVisualization` Hook 將缺口資料轉換為圖表可用的格式

2. **圖表整合**：

   - 每個缺口生成兩條線：上邊界線和下邊界線
   - 線條顏色根據缺口類型（向上/向下）自動調整
   - 線條樣式根據回補狀態（已補/未補）自動調整

3. **動態控制**：
   - 使用 React state 控制缺口線條的顯示/隱藏
   - 即時切換，無需重新載入資料

### 📋 使用方式

1. **查看缺口統計**：

   ```
   缺口: 12 (↑7 ↓5 未補3)
   ```

   - 總共 12 個缺口
   - 7 個向上跳空
   - 5 個向下跳空
   - 3 個未回補

2. **開啟缺口顯示**：

   - 點擊 "顯示缺口" 旁邊的開關
   - 圖表上會立即顯示所有檢測到的缺口線條

3. **分析缺口**：
   - 綠色線條：向上跳空（支撐位參考）
   - 紅色線條：向下跳空（阻力位參考）
   - 實線：未回補缺口（較強的支撐/阻力）
   - 虛線：已回補缺口（較弱的支撐/阻力）

### 🎯 實際應用

- **技術分析**：缺口線條可作為重要的支撐和阻力位參考
- **交易策略**：未回補的缺口通常具有較強的技術意義
- **風險管理**：了解價格可能的反彈或回落位置

### ⚙️ 自訂設定

您可以在程式碼中調整：

- **最小缺口閾值**：目前設定為 1%，可在 `useGapDetection(deals, 1.0)` 中修改
- **顯示數量**：目前顯示所有檢測到的缺口
- **視覺樣式**：線條顏色、粗細、透明度等都可以在 `useGapVisualization` 中調整

這個功能讓您能夠更直觀地識別和分析股票的跳空缺口，為技術分析提供重要參考。
